"use strict";(self.webpackChunkbabylon_bulletphysics=self.webpackChunkbabylon_bulletphysics||[]).push([[1886],{4444:(t,e,r)=>{r.d(e,{x:()=>s});var n=r(9923);class s{shouldSync;constructor(){this.shouldSync=!0}setTransformMatrixFromArray(t,e,r,n){const s=t.array;s[4]=r[n],s[8]=r[n+1],s[12]=r[n+2],s[5]=r[n+4],s[9]=r[n+5],s[13]=r[n+6],s[6]=r[n+8],s[10]=r[n+9],s[14]=r[n+10],s[16]=r[n+12],s[17]=r[n+13],s[18]=r[n+14];const a=e.array;0!==a[0]&&(a[0]=2)}setDynamicTransformMatrixFromArray(t,e,r){const n=t.array;n[0]=e[r],n[16]=e[r+1],n[32]=e[r+2],n[1]=e[r+4],n[17]=e[r+5],n[33]=e[r+6],n[2]=e[r+8],n[18]=e[r+9],n[34]=e[r+10],n[48]=e[r+12],n[49]=e[r+13],n[50]=e[r+14]}setDamping(t,e,r,n){t.rigidBodySetDamping(e,r,n)}getLinearDamping(t,e){return t.rigidBodyGetLinearDamping(e)}getAngularDamping(t,e){return t.rigidBodyGetAngularDamping(e)}setMassProps(t,e,r,n){t.rigidBodySetMassProps(e,r,n.x,n.y,n.z)}getMass(t,e){return t.rigidBodyGetMass(e)}getLocalInertia(t,e){const r=t.allocateBuffer(12),s=t.createTypedArray(Float32Array,r,3).array;t.rigidBodyGetLocalInertia(e,r);const a=new n.Pq(s[0],s[1],s[2]);return t.deallocateBuffer(r,12),a}}},5228:(t,e,r)=>{r.d(e,{R:()=>s});var n=r(9923);class s{shouldSync;_count;constructor(t){this.shouldSync=!0,this._count=t}setTransformMatrixFromArray(t,e,r,n,s){const a=t.array,i=20*r;a[i+4+0]=n[s],a[i+8+0]=n[s+1],a[i+12+0]=n[s+2],a[i+4+1]=n[s+4],a[i+8+1]=n[s+5],a[i+12+1]=n[s+6],a[i+4+2]=n[s+8],a[i+8+2]=n[s+9],a[i+12+2]=n[s+10],a[i+16+0]=n[s+12],a[i+16+1]=n[s+13],a[i+16+2]=n[s+14];const h=e.array;0!==h[r]&&(h[r]=2)}setTransformMatricesFromArray(t,e,r,n){const s=t.array,a=e.array,i=this._count;let h=0,o=n;for(let t=0;t<i;++t)s[h+4+0]=r[o],s[h+8+0]=r[o+1],s[h+12+0]=r[o+2],s[h+4+1]=r[o+4],s[h+8+1]=r[o+5],s[h+12+1]=r[o+6],s[h+4+2]=r[o+8],s[h+8+2]=r[o+9],s[h+12+2]=r[o+10],s[h+16+0]=r[o+12],s[h+16+1]=r[o+13],s[h+16+2]=r[o+14],0!==a[t]&&(a[t]=2),h+=20,o+=16}setDynamicTransformMatrixFromArray(t,e,r,n){const s=t[e].array;s[0]=r[n],s[16]=r[n+1],s[32]=r[n+2],s[1]=r[n+4],s[17]=r[n+5],s[33]=r[n+6],s[2]=r[n+8],s[18]=r[n+9],s[34]=r[n+10],s[48]=r[n+12],s[49]=r[n+13],s[50]=r[n+14]}setDamping(t,e,r,n,s){t.rigidBodyBundleSetDamping(e,r,n,s)}getLinearDamping(t,e,r){return t.rigidBodyBundleGetLinearDamping(e,r)}getAngularDamping(t,e,r){return t.rigidBodyBundleGetAngularDamping(e,r)}setMassProps(t,e,r,n,s){t.rigidBodyBundleSetMassProps(e,r,n,s.x,s.y,s.z)}getMass(t,e,r){return t.rigidBodyBundleGetMass(e,r)}getLocalInertia(t,e,r){const s=t.allocateBuffer(12),a=t.createTypedArray(Float32Array,s,3).array;t.rigidBodyBundleGetLocalInertia(e,r,s);const i=new n.Pq(a[0],a[1],a[2]);return t.deallocateBuffer(s,12),i}}},5901:(t,e,r)=>{r.d(e,{t:()=>h});var n=r(9923);class s{_wasmInstance;_ptr;_shapeReference;constructor(t,e){this._wasmInstance=t,this._ptr=e,this._shapeReference=null}dispose(){0!==this._ptr&&(this._wasmInstance.deref()?.deallocateBuffer(this._ptr,144),this._ptr=0,this._shapeReference&&this._shapeReference.removeReference(),this._shapeReference=null)}get ptr(){return this._ptr}get shape(){return this._shapeReference}set shape(t){this._shapeReference&&this._shapeReference.removeReference(),this._shapeReference=t,this._shapeReference&&this._shapeReference.addReference()}}function a(t){t.dispose()}const i=new WeakMap;class h{_wasmInstance;_uint32Ptr;_float32Ptr;_uint8Ptr;_uint16Ptr;_inner;constructor(t){this._wasmInstance=t;const e=t.allocateBuffer(144);this._uint32Ptr=t.createTypedArray(Uint32Array,e,36),this._float32Ptr=t.createTypedArray(Float32Array,e,36),this._uint8Ptr=t.createTypedArray(Uint8Array,e,144),this._uint16Ptr=t.createTypedArray(Uint16Array,e,72),this._inner=new s(new WeakRef(t),e);const r=this._uint32Ptr.array,n=this._float32Ptr.array,h=this._uint8Ptr.array,o=this._uint16Ptr.array;r[0]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=1,n[10]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=1,n[15]=0,n[16]=0,n[17]=0,n[18]=0,n[19]=1,o[40]=0,h[82]=0,n[21]=1,n[22]=0,n[23]=0,n[24]=0,n[25]=0,n[26]=0,n[27]=.5,n[28]=0,n[29]=0,n[30]=1,o[62]=1,o[63]=65535,h[128]=0,h[129]=0,h[130]=0;let c=i.get(t);void 0===c&&(c=new FinalizationRegistry(a),i.set(t,c)),c.register(this,this._inner,this)}dispose(){if(0===this._inner.ptr)return;this._inner.dispose();const t=i.get(this._wasmInstance);t?.unregister(this)}get ptr(){return this._inner.ptr}_nullCheck(){if(0===this._inner.ptr)throw new Error("Cannot access disposed RigidBodyConstructionInfo")}get shape(){return this._nullCheck(),this._inner.shape}set shape(t){this._nullCheck(),this._inner.shape=t,this._uint32Ptr.array[0]=t?t.ptr:0}getInitialTransformToRef(t){this._nullCheck();const e=this._float32Ptr.array;return t.set(e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17],e[18],e[19]),t}setInitialTransform(t){this._nullCheck();const e=this._float32Ptr.array;t.copyToArray(e,4)}get motionType(){return this._nullCheck(),this._uint8Ptr.array[82]}set motionType(t){this._nullCheck(),this._uint8Ptr.array[82]=t}get mass(){return this._nullCheck(),this._float32Ptr.array[21]}set mass(t){this._nullCheck(),this._float32Ptr.array[21]=t}get localInertia(){if(this._nullCheck(),!(1&this._uint16Ptr.array[40]))return null;const t=this._float32Ptr.array,e=t[22],r=t[23],s=t[24];return new n.Pq(e,r,s)}set localInertia(t){if(this._nullCheck(),null===t)return void(this._uint16Ptr.array[40]&=-2);this._uint16Ptr.array[40]|=1;const e=this._float32Ptr.array;e[22]=t.x,e[23]=t.y,e[24]=t.z}get linearDamping(){return this._nullCheck(),this._float32Ptr.array[25]}set linearDamping(t){this._nullCheck(),this._float32Ptr.array[25]=t}get angularDamping(){return this._nullCheck(),this._float32Ptr.array[26]}set angularDamping(t){this._nullCheck(),this._float32Ptr.array[26]=t}get friction(){return this._nullCheck(),this._float32Ptr.array[27]}set friction(t){this._nullCheck(),this._float32Ptr.array[27]=t}get restitution(){return this._nullCheck(),this._float32Ptr.array[28]}set restitution(t){this._nullCheck(),this._float32Ptr.array[28]=t}get linearSleepingThreshold(){return this._nullCheck(),this._float32Ptr.array[29]}set linearSleepingThreshold(t){this._nullCheck(),this._float32Ptr.array[29]=t}get angularSleepingThreshold(){return this._nullCheck(),this._float32Ptr.array[30]}set angularSleepingThreshold(t){this._nullCheck(),this._float32Ptr.array[30]=t}get collisionGroup(){return this._nullCheck(),this._uint16Ptr.array[62]}set collisionGroup(t){this._nullCheck(),this._uint16Ptr.array[62]=t}get collisionMask(){return this._nullCheck(),this._uint16Ptr.array[63]}set collisionMask(t){this._nullCheck(),this._uint16Ptr.array[63]=t}get additionalDamping(){return this._nullCheck(),!!this._uint8Ptr.array[128]}set additionalDamping(t){this._nullCheck(),this._uint8Ptr.array[128]=+t}get noContactResponse(){return this._nullCheck(),!!this._uint8Ptr.array[129]}set noContactResponse(t){this._nullCheck(),this._uint8Ptr.array[129]=+t}get disableDeactivation(){return this._nullCheck(),!!this._uint8Ptr.array[130]}set disableDeactivation(t){this._nullCheck(),this._uint8Ptr.array[130]=+t}}},6405:(t,e,r)=>{r.d(e,{O4:()=>o,SA:()=>h,Ty:()=>c});class n{_wasmInstance;_ptr;_referenceCount;constructor(t,e){this._wasmInstance=t,this._ptr=e,this._referenceCount=0}dispose(){if(this._referenceCount>0)throw new Error("Cannot dispose shape while it still has references");0!==this._ptr&&(this._wasmInstance.deref()?.destroyShape(this._ptr),this._ptr=0)}get ptr(){return this._ptr}addReference(){this._referenceCount+=1}removeReference(){this._referenceCount-=1}}function s(t){t.dispose()}const a=new WeakMap;class i{runtime;_inner;constructor(t,e){this.runtime=t,this._inner=new n(new WeakRef(t.wasmInstance),e);let r=a.get(t.wasmInstance);void 0===r&&(r=new FinalizationRegistry(s),a.set(t.wasmInstance,r)),r.register(this,this._inner,this)}dispose(){if(0===this._inner.ptr)return;this._inner.dispose();const t=a.get(this.runtime.wasmInstance);t?.unregister(this)}get ptr(){return this._inner.ptr}addReference(){this._inner.addReference()}removeReference(){this._inner.removeReference()}}class h extends i{constructor(t,e){const r=t.wasmInstance.createBoxShape(e.x,e.y,e.z);super(t,r)}}class o extends i{constructor(t,e){const r=t.wasmInstance.createSphereShape(e);super(t,r)}}class c extends i{constructor(t,e,r){const n=t.wasmInstance.createStaticPlaneShape(e.x,e.y,e.z,r);super(t,n)}}},6738:(t,e,r)=>{r.d(e,{e:()=>i});class n{array;constructor(t,e,r,n){this.array=new t(e.buffer,r,n)}}class s{_memory;_byteOffset;_length;_array;constructor(t,e,r,n){this._memory=e,this._byteOffset=r,this._length=n,this._array=0===n?new t(0):new t(e.buffer,r,n)}get array(){return this._array.length!==this._length&&(this._array=new this._array.constructor(this._memory.buffer,this._byteOffset,this._length)),this._array}}const a=new WeakMap;async function i(t,e=navigator.hardwareConcurrency){const r=t.getWasmInstanceInner();{const t=a.get(r);if(void 0!==t)return t}let i=null;a.set(r,new Promise((t=>i=t)));const h={...r},o=await h.default({});h.init();const c=o.memory;return h.memory=c,c.buffer instanceof ArrayBuffer?h.createTypedArray=function(t,e,r){return new s(t,c,e,r)}:h.createTypedArray=function(t,e,r){return new n(t,c,e,r)},await(h.initThreadPool?.(e)),i(h),h}}}]);