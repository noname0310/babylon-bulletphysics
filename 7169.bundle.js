"use strict";(self.webpackChunkbabylon_bulletphysics=self.webpackChunkbabylon_bulletphysics||[]).push([[7169],{7169:(t,e,r)=>{r.r(e),r.d(e,{_TGATextureLoader:()=>n});var a=r(52053);class n{constructor(){this.supportCascades=!1}loadCubeData(){throw".env not supported in Cube."}loadData(t,e,r){const n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i=(0,a.O_)(n);r(i.width,i.height,e.generateMipMaps,!1,(()=>{(0,a.FA)(e,n)}))}}},52053:(t,e,r)=>{r.d(e,{FA:()=>_,O_:()=>w});var a=r(51137);const n=1,i=2,o=3,s=9,h=10,c=11,l=48,g=4,f=0,u=1,d=2,b=3;function w(t){let e=0;return{id_length:t[e++],colormap_type:t[e++],image_type:t[e++],colormap_index:t[e++]|t[e++]<<8,colormap_length:t[e++]|t[e++]<<8,colormap_size:t[e++],origin:[t[e++]|t[e++]<<8,t[e++]|t[e++]<<8],width:t[e++]|t[e++]<<8,height:t[e++]|t[e++]<<8,pixel_size:t[e++],flags:t[e++]}}function _(t,e){if(e.length<19)return void a.V.Error("Unable to load TGA file - Not enough data to contain header");let r=18;const _=w(e);if(_.id_length+r>e.length)return void a.V.Error("Unable to load TGA file - Not enough data");r+=_.id_length;let y,m=!1,A=!1,U=!1;switch(_.image_type){case s:m=!0;case n:A=!0;break;case h:m=!0;case i:break;case c:m=!0;case o:U=!0}const D=_.pixel_size>>3,k=_.width*_.height*D;let G,I,T,x,C,v,z;if(A&&(G=e.subarray(r,r+=_.colormap_length*(_.colormap_size>>3))),m){let t,a,n;y=new Uint8Array(k);let i=0;const o=new Uint8Array(D);for(;r<k&&i<k;)if(t=e[r++],a=1+(127&t),128&t){for(n=0;n<D;++n)o[n]=e[r++];for(n=0;n<a;++n)y.set(o,i+n*D);i+=D*a}else{for(a*=D,n=0;n<a;++n)y[i+n]=e[r++];i+=a}}else y=e.subarray(r,r+=A?_.width*_.height:k);switch((_.flags&l)>>g){default:case d:I=0,x=1,z=_.width,T=0,C=1,v=_.height;break;case f:I=0,x=1,z=_.width,T=_.height-1,C=-1,v=-1;break;case b:I=_.width-1,x=-1,z=-1,T=0,C=1,v=_.height;break;case u:I=_.width-1,x=-1,z=-1,T=_.height-1,C=-1,v=-1}const E="_getImageData"+(U?"Grey":"")+_.pixel_size+"bits",O=p[E](_,G,y,T,C,v,I,x,z);t.getEngine()._uploadDataToTextureDirectly(t,O)}const p={GetTGAHeader:w,UploadContent:_,_getImageData8bits:function(t,e,r,a,n,i,o,s,h){const c=r,l=e,g=t.width,f=t.height;let u,d,b,w=0;const _=new Uint8Array(g*f*4);for(b=a;b!==i;b+=n)for(d=o;d!==h;d+=s,w++)u=c[w],_[4*(d+g*b)+3]=255,_[4*(d+g*b)+2]=l[3*u+0],_[4*(d+g*b)+1]=l[3*u+1],_[4*(d+g*b)+0]=l[3*u+2];return _},_getImageData16bits:function(t,e,r,a,n,i,o,s,h){const c=r,l=t.width,g=t.height;let f,u,d,b=0;const w=new Uint8Array(l*g*4);for(d=a;d!==i;d+=n)for(u=o;u!==h;u+=s,b+=2){f=c[b+0]+(c[b+1]<<8);const t=255*((31744&f)>>10)/31|0,e=255*((992&f)>>5)/31|0,r=255*(31&f)/31|0;w[4*(u+l*d)+0]=t,w[4*(u+l*d)+1]=e,w[4*(u+l*d)+2]=r,w[4*(u+l*d)+3]=32768&f?0:255}return w},_getImageData24bits:function(t,e,r,a,n,i,o,s,h){const c=r,l=t.width,g=t.height;let f,u,d=0;const b=new Uint8Array(l*g*4);for(u=a;u!==i;u+=n)for(f=o;f!==h;f+=s,d+=3)b[4*(f+l*u)+3]=255,b[4*(f+l*u)+2]=c[d+0],b[4*(f+l*u)+1]=c[d+1],b[4*(f+l*u)+0]=c[d+2];return b},_getImageData32bits:function(t,e,r,a,n,i,o,s,h){const c=r,l=t.width,g=t.height;let f,u,d=0;const b=new Uint8Array(l*g*4);for(u=a;u!==i;u+=n)for(f=o;f!==h;f+=s,d+=4)b[4*(f+l*u)+2]=c[d+0],b[4*(f+l*u)+1]=c[d+1],b[4*(f+l*u)+0]=c[d+2],b[4*(f+l*u)+3]=c[d+3];return b},_getImageDataGrey8bits:function(t,e,r,a,n,i,o,s,h){const c=r,l=t.width,g=t.height;let f,u,d,b=0;const w=new Uint8Array(l*g*4);for(d=a;d!==i;d+=n)for(u=o;u!==h;u+=s,b++)f=c[b],w[4*(u+l*d)+0]=f,w[4*(u+l*d)+1]=f,w[4*(u+l*d)+2]=f,w[4*(u+l*d)+3]=255;return w},_getImageDataGrey16bits:function(t,e,r,a,n,i,o,s,h){const c=r,l=t.width,g=t.height;let f,u,d=0;const b=new Uint8Array(l*g*4);for(u=a;u!==i;u+=n)for(f=o;f!==h;f+=s,d+=2)b[4*(f+l*u)+0]=c[d+0],b[4*(f+l*u)+1]=c[d+0],b[4*(f+l*u)+2]=c[d+0],b[4*(f+l*u)+3]=c[d+1];return b}}}}]);