"use strict";(self.webpackChunkbabylon_bulletphysics=self.webpackChunkbabylon_bulletphysics||[]).push([[9297],{4871:(e,i,t)=>{e.exports=t.p+"780cf84b4ba34f6758f7.wasm"},9297:(e,i,t)=>{t.r(i),t.d(i,{SceneBuilder:()=>at});var n={};t.r(n),t.d(n,{allocateBuffer:()=>Zi,constraintEnableSpring:()=>Ui,constraintSetAngularLowerLimit:()=>xi,constraintSetAngularUpperLimit:()=>ki,constraintSetDamping:()=>Oi,constraintSetLinearLowerLimit:()=>Di,constraintSetLinearUpperLimit:()=>Fi,constraintSetStiffness:()=>Ei,createBoxShape:()=>ue,createCapsuleShape:()=>ce,createGeneric6DofConstraint:()=>Ci,createGeneric6DofConstraintFromBundle:()=>_i,createGeneric6DofSpringConstraint:()=>Mi,createGeneric6DofSpringConstraintFromBundle:()=>Vi,createMultiPhysicsRuntime:()=>ze,createMultiPhysicsWorld:()=>L,createPhysicsRuntime:()=>Qi,createPhysicsWorld:()=>J,createRigidBody:()=>ye,createRigidBodyBundle:()=>Je,createSphereShape:()=>le,createStaticPlaneShape:()=>se,deallocateBuffer:()=>Ki,default:()=>rt,destroyConstraint:()=>qi,destroyMultiPhysicsRuntime:()=>Ye,destroyMultiPhysicsWorld:()=>v,destroyPhysicsRuntime:()=>zi,destroyPhysicsWorld:()=>H,destroyRigidBody:()=>fe,destroyRigidBodyBundle:()=>He,destroyShape:()=>ae,init:()=>ji,initSync:()=>nt,multiPhysicsRuntimeGetLockStatePtr:()=>$e,multiPhysicsWorldAddConstraint:()=>K,multiPhysicsWorldAddRigidBody:()=>M,multiPhysicsWorldAddRigidBodyBundle:()=>q,multiPhysicsWorldAddRigidBodyBundleShadow:()=>j,multiPhysicsWorldAddRigidBodyBundleToGlobal:()=>k,multiPhysicsWorldAddRigidBodyShadow:()=>E,multiPhysicsWorldAddRigidBodyToGlobal:()=>F,multiPhysicsWorldMakeBodyKinematic:()=>z,multiPhysicsWorldRemoveConstraint:()=>Q,multiPhysicsWorldRemoveRigidBody:()=>V,multiPhysicsWorldRemoveRigidBodyBundle:()=>D,multiPhysicsWorldRemoveRigidBodyBundleFromGlobal:()=>U,multiPhysicsWorldRemoveRigidBodyBundleShadow:()=>Z,multiPhysicsWorldRemoveRigidBodyFromGlobal:()=>x,multiPhysicsWorldRemoveRigidBodyShadow:()=>O,multiPhysicsWorldRestoreBodyDynamic:()=>Y,multiPhysicsWorldSetGravity:()=>C,multiPhysicsWorldStepSimulation:()=>_,multiPhysicsWorldUseMotionStateBuffer:()=>$,physicsRuntimeGetLockStatePtr:()=>Yi,physicsWorldAddConstraint:()=>oe,physicsWorldAddRigidBody:()=>ee,physicsWorldAddRigidBodyBundle:()=>te,physicsWorldRemoveConstraint:()=>re,physicsWorldRemoveRigidBody:()=>ie,physicsWorldRemoveRigidBodyBundle:()=>ne,physicsWorldSetGravity:()=>N,physicsWorldStepSimulation:()=>X,physicsWorldUseMotionStateBuffer:()=>de,rigidBodyApplyCentralForce:()=>Ge,rigidBodyApplyCentralImpulse:()=>Te,rigidBodyApplyCentralPushImpulse:()=>qe,rigidBodyApplyForce:()=>We,rigidBodyApplyImpulse:()=>Ie,rigidBodyApplyPushImpulse:()=>ve,rigidBodyApplyTorque:()=>Re,rigidBodyApplyTorqueImpulse:()=>Le,rigidBodyApplyTorqueTurnImpulse:()=>De,rigidBodyBundleApplyCentralForce:()=>li,rigidBodyBundleApplyCentralImpulse:()=>ai,rigidBodyBundleApplyCentralPushImpulse:()=>wi,rigidBodyBundleApplyForce:()=>si,rigidBodyBundleApplyImpulse:()=>fi,rigidBodyBundleApplyPushImpulse:()=>Bi,rigidBodyBundleApplyTorque:()=>ci,rigidBodyBundleApplyTorqueImpulse:()=>yi,rigidBodyBundleApplyTorqueTurnImpulse:()=>Pi,rigidBodyBundleClearForces:()=>Si,rigidBodyBundleGetAngularDamping:()=>ti,rigidBodyBundleGetAngularVelocity:()=>Ai,rigidBodyBundleGetBufferedMotionStatesPtr:()=>Xe,rigidBodyBundleGetLinearDamping:()=>ii,rigidBodyBundleGetLinearVelocity:()=>bi,rigidBodyBundleGetLocalInertia:()=>ri,rigidBodyBundleGetMass:()=>oi,rigidBodyBundleGetMotionStatesPtr:()=>Ne,rigidBodyBundleGetPushVelocity:()=>gi,rigidBodyBundleGetPushVelocityInLocalPoint:()=>Ti,rigidBodyBundleGetTemporalKinematicStatesPtr:()=>vi,rigidBodyBundleGetTotalForce:()=>di,rigidBodyBundleGetTotalTorque:()=>ui,rigidBodyBundleGetTurnVelocity:()=>pi,rigidBodyBundleGetVelocityInLocalPoint:()=>Wi,rigidBodyBundleGetWorldTransformPtr:()=>Ii,rigidBodyBundleSetAngularVelocity:()=>Ri,rigidBodyBundleSetDamping:()=>ei,rigidBodyBundleSetLinearVelocity:()=>Gi,rigidBodyBundleSetMassProps:()=>ni,rigidBodyBundleSetPushVelocity:()=>mi,rigidBodyBundleSetTurnVelocity:()=>hi,rigidBodyBundleTranslate:()=>Li,rigidBodyClearForces:()=>Fe,rigidBodyGetAngularDamping:()=>he,rigidBodyGetAngularVelocity:()=>ke,rigidBodyGetBufferedMotionStatePtr:()=>ge,rigidBodyGetLinearDamping:()=>me,rigidBodyGetLinearVelocity:()=>xe,rigidBodyGetLocalInertia:()=>Se,rigidBodyGetMass:()=>Pe,rigidBodyGetMotionStatePtr:()=>Be,rigidBodyGetPushVelocity:()=>Ce,rigidBodyGetPushVelocityInLocalPoint:()=>je,rigidBodyGetTemporalKinematicStatePtr:()=>Qe,rigidBodyGetTotalForce:()=>be,rigidBodyGetTotalTorque:()=>Ae,rigidBodyGetTurnVelocity:()=>_e,rigidBodyGetVelocityInLocalPoint:()=>Oe,rigidBodyGetWorldTransformPtr:()=>Ke,rigidBodySetAngularVelocity:()=>Ee,rigidBodySetDamping:()=>pe,rigidBodySetLinearVelocity:()=>Ue,rigidBodySetMassProps:()=>we,rigidBodySetPushVelocity:()=>Me,rigidBodySetTurnVelocity:()=>Ve,rigidBodyTranslate:()=>Ze}),t(203),t(1503),t(8227);var o=t(7456),r=t(5581),d=t(1513),u=t(9711),l=t(6041),c=t(9923),s=t(9899),a=t(8144),y=t(554),f=t(6738),B=t(7168),g=t(3948),p=t(9009),m=t(7002);let h;const w="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&w.decode();let P=null;function S(){return null!==P&&0!==P.byteLength||(P=new Uint8Array(h.memory.buffer)),P}function b(e,i){return e>>>=0,w.decode(S().subarray(e,e+i))}const A=new Array(128).fill(void 0);A.push(void 0,null,!0,!1);let G=A.length;function R(e){G===A.length&&A.push(A.length+1);const i=G;if(G=A[i],"number"!=typeof G)throw new Error("corrupt heap");return A[i]=e,i}function W(e){return A[e]}function T(e){if("boolean"!=typeof e)throw new Error("expected a boolean argument, found "+typeof e)}function L(e){return T(e),h.createMultiPhysicsWorld(e)>>>0}function I(e){if("number"!=typeof e)throw new Error("expected a number argument, found "+typeof e)}function v(e){I(e),h.destroyMultiPhysicsWorld(e)}function C(e,i,t,n){I(e),h.multiPhysicsWorldSetGravity(e,i,t,n)}function _(e,i,t,n){I(e),I(t),h.multiPhysicsWorldStepSimulation(e,i,t,n)}function M(e,i,t){I(e),I(i),I(t),h.multiPhysicsWorldAddRigidBody(e,i,t)}function V(e,i,t){I(e),I(i),I(t),h.multiPhysicsWorldRemoveRigidBody(e,i,t)}function q(e,i,t){I(e),I(i),I(t),h.multiPhysicsWorldAddRigidBodyBundle(e,i,t)}function D(e,i,t){I(e),I(i),I(t),h.multiPhysicsWorldRemoveRigidBodyBundle(e,i,t)}function F(e,i){I(e),I(i),h.multiPhysicsWorldAddRigidBodyToGlobal(e,i)}function x(e,i){I(e),I(i),h.multiPhysicsWorldRemoveRigidBodyFromGlobal(e,i)}function k(e,i){I(e),I(i),h.multiPhysicsWorldAddRigidBodyBundleToGlobal(e,i)}function U(e,i){I(e),I(i),h.multiPhysicsWorldRemoveRigidBodyBundleFromGlobal(e,i)}function E(e,i,t){I(e),I(i),I(t),h.multiPhysicsWorldAddRigidBodyShadow(e,i,t)}function O(e,i,t){I(e),I(i),I(t),h.multiPhysicsWorldRemoveRigidBodyShadow(e,i,t)}function j(e,i,t){I(e),I(i),I(t),h.multiPhysicsWorldAddRigidBodyBundleShadow(e,i,t)}function Z(e,i,t){I(e),I(i),I(t),h.multiPhysicsWorldRemoveRigidBodyBundleShadow(e,i,t)}function K(e,i,t,n){I(e),I(i),I(t),T(n),h.multiPhysicsWorldAddConstraint(e,i,t,n)}function Q(e,i,t){I(e),I(i),I(t),h.multiPhysicsWorldRemoveConstraint(e,i,t)}function z(e,i){I(e),I(i),h.multiPhysicsWorldMakeBodyKinematic(e,i)}function Y(e,i){I(e),I(i),h.multiPhysicsWorldRestoreBodyDynamic(e,i)}function $(e,i){I(e),T(i),h.multiPhysicsWorldUseMotionStateBuffer(e,i)}function J(){return h.createPhysicsWorld()>>>0}function H(e){I(e),h.destroyPhysicsWorld(e)}function N(e,i,t,n){I(e),h.physicsWorldSetGravity(e,i,t,n)}function X(e,i,t,n){I(e),I(t),h.physicsWorldStepSimulation(e,i,t,n)}function ee(e,i){I(e),I(i),h.physicsWorldAddRigidBody(e,i)}function ie(e,i){I(e),I(i),h.physicsWorldRemoveRigidBody(e,i)}function te(e,i){I(e),I(i),h.physicsWorldAddRigidBodyBundle(e,i)}function ne(e,i){I(e),I(i),h.physicsWorldRemoveRigidBodyBundle(e,i)}function oe(e,i,t){I(e),I(i),T(t),h.physicsWorldAddConstraint(e,i,t)}function re(e,i){I(e),I(i),h.physicsWorldRemoveConstraint(e,i)}function de(e,i){I(e),T(i),h.physicsWorldUseMotionStateBuffer(e,i)}function ue(e,i,t){return h.createBoxShape(e,i,t)>>>0}function le(e){return h.createSphereShape(e)>>>0}function ce(e,i){return h.createCapsuleShape(e,i)>>>0}function se(e,i,t,n){return h.createStaticPlaneShape(e,i,t,n)>>>0}function ae(e){I(e),h.destroyShape(e)}function ye(e){return I(e),h.createRigidBody(e)>>>0}function fe(e){I(e),h.destroyRigidBody(e)}function Be(e){return I(e),h.rigidBodyGetMotionStatePtr(e)>>>0}function ge(e){return I(e),h.rigidBodyGetBufferedMotionStatePtr(e)>>>0}function pe(e,i,t){I(e),h.rigidBodySetDamping(e,i,t)}function me(e){return I(e),h.rigidBodyGetLinearDamping(e)}function he(e){return I(e),h.rigidBodyGetAngularDamping(e)}function we(e,i,t,n,o){I(e),h.rigidBodySetMassProps(e,i,t,n,o)}function Pe(e){return I(e),h.rigidBodyGetMass(e)}function Se(e,i){I(e),I(i),h.rigidBodyGetLocalInertia(e,i)}function be(e,i){I(e),I(i),h.rigidBodyGetTotalForce(e,i)}function Ae(e,i){I(e),I(i),h.rigidBodyGetTotalTorque(e,i)}function Ge(e,i,t,n){I(e),h.rigidBodyApplyCentralForce(e,i,t,n)}function Re(e,i,t,n){I(e),h.rigidBodyApplyTorque(e,i,t,n)}function We(e,i,t){I(e),I(i),I(t),h.rigidBodyApplyForce(e,i,t)}function Te(e,i,t,n){I(e),h.rigidBodyApplyCentralImpulse(e,i,t,n)}function Le(e,i,t,n){I(e),h.rigidBodyApplyTorqueImpulse(e,i,t,n)}function Ie(e,i,t){I(e),I(i),I(t),h.rigidBodyApplyImpulse(e,i,t)}function ve(e,i,t){I(e),I(i),I(t),h.rigidBodyApplyPushImpulse(e,i,t)}function Ce(e,i){I(e),I(i),h.rigidBodyGetPushVelocity(e,i)}function _e(e,i){I(e),I(i),h.rigidBodyGetTurnVelocity(e,i)}function Me(e,i,t,n){I(e),h.rigidBodySetPushVelocity(e,i,t,n)}function Ve(e,i,t,n){I(e),h.rigidBodySetTurnVelocity(e,i,t,n)}function qe(e,i,t,n){I(e),h.rigidBodyApplyCentralPushImpulse(e,i,t,n)}function De(e,i,t,n){I(e),h.rigidBodyApplyTorqueTurnImpulse(e,i,t,n)}function Fe(e){I(e),h.rigidBodyClearForces(e)}function xe(e,i){I(e),I(i),h.rigidBodyGetLinearVelocity(e,i)}function ke(e,i){I(e),I(i),h.rigidBodyGetAngularVelocity(e,i)}function Ue(e,i,t,n){I(e),h.rigidBodySetLinearVelocity(e,i,t,n)}function Ee(e,i,t,n){I(e),h.rigidBodySetAngularVelocity(e,i,t,n)}function Oe(e,i,t){I(e),I(i),I(t),h.rigidBodyGetVelocityInLocalPoint(e,i,t)}function je(e,i,t){I(e),I(i),I(t),h.rigidBodyGetPushVelocityInLocalPoint(e,i,t)}function Ze(e,i,t,n){I(e),h.rigidBodyTranslate(e,i,t,n)}function Ke(e){return I(e),h.rigidBodyGetWorldTransformPtr(e)>>>0}function Qe(e){return I(e),h.rigidBodyGetTemporalKinematicStatePtr(e)>>>0}function ze(e){return I(e),h.createMultiPhysicsRuntime(e)>>>0}function Ye(e){I(e),h.destroyMultiPhysicsRuntime(e)}function $e(e){return I(e),h.multiPhysicsRuntimeGetLockStatePtr(e)>>>0}function Je(e,i){return I(e),I(i),h.createRigidBodyBundle(e,i)>>>0}function He(e){I(e),h.destroyRigidBodyBundle(e)}function Ne(e){return I(e),h.rigidBodyBundleGetMotionStatesPtr(e)>>>0}function Xe(e){return I(e),h.rigidBodyBundleGetBufferedMotionStatesPtr(e)>>>0}function ei(e,i,t,n){I(e),I(i),h.rigidBodyBundleSetDamping(e,i,t,n)}function ii(e,i){return I(e),I(i),h.rigidBodyBundleGetLinearDamping(e,i)}function ti(e,i){return I(e),I(i),h.rigidBodyBundleGetAngularDamping(e,i)}function ni(e,i,t,n,o,r){I(e),I(i),h.rigidBodyBundleSetMassProps(e,i,t,n,o,r)}function oi(e,i){return I(e),I(i),h.rigidBodyBundleGetMass(e,i)}function ri(e,i,t){I(e),I(i),I(t),h.rigidBodyBundleGetLocalInertia(e,i,t)}function di(e,i,t){I(e),I(i),I(t),h.rigidBodyBundleGetTotalForce(e,i,t)}function ui(e,i,t){I(e),I(i),I(t),h.rigidBodyBundleGetTotalTorque(e,i,t)}function li(e,i,t,n,o){I(e),I(i),h.rigidBodyBundleApplyCentralForce(e,i,t,n,o)}function ci(e,i,t,n,o){I(e),I(i),h.rigidBodyBundleApplyTorque(e,i,t,n,o)}function si(e,i,t,n){I(e),I(i),I(t),I(n),h.rigidBodyBundleApplyForce(e,i,t,n)}function ai(e,i,t,n,o){I(e),I(i),h.rigidBodyBundleApplyCentralImpulse(e,i,t,n,o)}function yi(e,i,t,n,o){I(e),I(i),h.rigidBodyBundleApplyTorqueImpulse(e,i,t,n,o)}function fi(e,i,t,n){I(e),I(i),I(t),I(n),h.rigidBodyBundleApplyImpulse(e,i,t,n)}function Bi(e,i,t,n){I(e),I(i),I(t),I(n),h.rigidBodyBundleApplyPushImpulse(e,i,t,n)}function gi(e,i,t){I(e),I(i),I(t),h.rigidBodyBundleGetPushVelocity(e,i,t)}function pi(e,i,t){I(e),I(i),I(t),h.rigidBodyBundleGetTurnVelocity(e,i,t)}function mi(e,i,t,n,o){I(e),I(i),h.rigidBodyBundleSetPushVelocity(e,i,t,n,o)}function hi(e,i,t,n,o){I(e),I(i),h.rigidBodyBundleSetTurnVelocity(e,i,t,n,o)}function wi(e,i,t,n,o){I(e),I(i),h.rigidBodyBundleApplyCentralPushImpulse(e,i,t,n,o)}function Pi(e,i,t,n,o){I(e),I(i),h.rigidBodyBundleApplyTorqueTurnImpulse(e,i,t,n,o)}function Si(e,i){I(e),I(i),h.rigidBodyBundleClearForces(e,i)}function bi(e,i,t){I(e),I(i),I(t),h.rigidBodyBundleGetLinearVelocity(e,i,t)}function Ai(e,i,t){I(e),I(i),I(t),h.rigidBodyBundleGetAngularVelocity(e,i,t)}function Gi(e,i,t,n,o){I(e),I(i),h.rigidBodyBundleSetLinearVelocity(e,i,t,n,o)}function Ri(e,i,t,n,o){I(e),I(i),h.rigidBodyBundleSetAngularVelocity(e,i,t,n,o)}function Wi(e,i,t,n){I(e),I(i),I(t),I(n),h.rigidBodyBundleGetVelocityInLocalPoint(e,i,t,n)}function Ti(e,i,t,n){I(e),I(i),I(t),I(n),h.rigidBodyBundleGetPushVelocityInLocalPoint(e,i,t,n)}function Li(e,i,t,n,o){I(e),I(i),h.rigidBodyBundleTranslate(e,i,t,n,o)}function Ii(e,i){return I(e),I(i),h.rigidBodyBundleGetWorldTransformPtr(e,i)>>>0}function vi(e){return I(e),h.rigidBodyBundleGetTemporalKinematicStatesPtr(e)>>>0}function Ci(e,i,t,n,o){return I(e),I(i),I(t),I(n),T(o),h.createGeneric6DofConstraint(e,i,t,n,o)>>>0}function _i(e,i,t,n,o,r){return I(e),I(i),I(t),I(n),I(o),T(r),h.createGeneric6DofConstraintFromBundle(e,i,t,n,o,r)>>>0}function Mi(e,i,t,n,o){return I(e),I(i),I(t),I(n),T(o),h.createGeneric6DofSpringConstraint(e,i,t,n,o)>>>0}function Vi(e,i,t,n,o,r){return I(e),I(i),I(t),I(n),I(o),T(r),h.createGeneric6DofSpringConstraintFromBundle(e,i,t,n,o,r)>>>0}function qi(e){I(e),h.destroyConstraint(e)}function Di(e,i,t,n){I(e),h.constraintSetLinearLowerLimit(e,i,t,n)}function Fi(e,i,t,n){I(e),h.constraintSetLinearUpperLimit(e,i,t,n)}function xi(e,i,t,n){I(e),h.constraintSetAngularLowerLimit(e,i,t,n)}function ki(e,i,t,n){I(e),h.constraintSetAngularUpperLimit(e,i,t,n)}function Ui(e,i,t){I(e),I(i),T(t),h.constraintEnableSpring(e,i,t)}function Ei(e,i,t){I(e),I(i),h.constraintSetStiffness(e,i,t)}function Oi(e,i,t){I(e),I(i),h.constraintSetDamping(e,i,t)}function ji(){h.init()}function Zi(e){return I(e),h.allocateBuffer(e)>>>0}function Ki(e,i){I(e),I(i),h.deallocateBuffer(e,i)}function Qi(e){return I(e),h.createPhysicsRuntime(e)>>>0}function zi(e){I(e),h.destroyPhysicsRuntime(e)}function Yi(e){return I(e),h.physicsRuntimeGetLockStatePtr(e)>>>0}function $i(e,i){try{return e.apply(this,i)}catch(e){let i=function(){try{return e instanceof Error?`${e.message}\n\nStack:\n${e.stack}`:e.toString()}catch(e){return"<failed to stringify thrown value>"}}();throw console.error("wasm-bindgen: imported JS function that was not marked as `catch` threw an error:",i),e}}let Ji=0;const Hi="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},Ni="function"==typeof Hi.encodeInto?function(e,i){return Hi.encodeInto(e,i)}:function(e,i){const t=Hi.encode(e);return i.set(t),{read:e.length,written:t.length}};let Xi=null;function et(){return(null===Xi||!0===Xi.buffer.detached||void 0===Xi.buffer.detached&&Xi.buffer!==h.memory.buffer)&&(Xi=new DataView(h.memory.buffer)),Xi}function it(){const e={wbg:{}};return e.wbg.__wbindgen_string_new=function(e,i){return R(b(e,i))},e.wbg.__wbindgen_object_drop_ref=function(e){!function(e){const i=W(e);(function(e){e<132||(A[e]=G,G=e)})(e)}(e)},e.wbg.__wbg_new_abda76e883ba8a5f=function(){return $i((function(){return R(new Error)}),arguments)},e.wbg.__wbg_stack_658279fe44541cf6=function(){return $i((function(e,i){const t=function(e,i,t){if("string"!=typeof e)throw new Error("expected a string argument, found "+typeof e);if(void 0===t){const t=Hi.encode(e),n=i(t.length,1)>>>0;return S().subarray(n,n+t.length).set(t),Ji=t.length,n}let n=e.length,o=i(n,1)>>>0;const r=S();let d=0;for(;d<n;d++){const i=e.charCodeAt(d);if(i>127)break;r[o+d]=i}if(d!==n){0!==d&&(e=e.slice(d)),o=t(o,n,n=d+3*e.length,1)>>>0;const i=S().subarray(o+d,o+n),r=Ni(e,i);if(r.read!==e.length)throw new Error("failed to pass whole string");d+=r.written,o=t(o,n,d,1)>>>0}return Ji=d,o}(W(i).stack,h.__wbindgen_malloc,h.__wbindgen_realloc),n=Ji;et().setInt32(e+4,n,!0),et().setInt32(e+0,t,!0)}),arguments)},e.wbg.__wbg_error_f851667af71bcfc6=function(){return $i((function(e,i){let t,n;try{t=e,n=i,console.error(b(e,i))}finally{h.__wbindgen_free(t,n,1)}}),arguments)},e.wbg.__wbg_error_09480e4aadca50ad=function(){return $i((function(e){console.error(W(e))}),arguments)},e.wbg.__wbg_log_b103404cc5920657=function(){return $i((function(e){console.log(W(e))}),arguments)},e.wbg.__wbindgen_throw=function(e,i){throw new Error(b(e,i))},e}function tt(e,i){return h=e.exports,ot.__wbindgen_wasm_module=i,Xi=null,P=null,h}function nt(e){if(void 0!==h)return h;void 0!==e&&Object.getPrototypeOf(e)===Object.prototype?({module:e}=e):console.warn("using deprecated parameters for `initSync()`; pass a single object instead");const i=it();return e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e)),tt(new WebAssembly.Instance(e,i),e)}async function ot(e){if(void 0!==h)return h;void 0!==e&&Object.getPrototypeOf(e)===Object.prototype?({module_or_path:e}=e):console.warn("using deprecated parameters for the initialization function; pass a single object instead"),void 0===e&&(e=new URL(t(4871),t.b));const i=it();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:o}=await async function(e,i){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,i)}catch(i){if("application/wasm"==e.headers.get("Content-Type"))throw i;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",i)}const t=await e.arrayBuffer();return await WebAssembly.instantiate(t,i)}{const t=await WebAssembly.instantiate(e,i);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}(await e,i);return tt(n,o)}const rt=ot;var dt=t(6405),ut=t(1592),lt=t(7648),ct=t(5901),st=t(3477);class at{async build(e,i){const t=new y.Z(i);t.clearColor=new l.ov(.95,.95,.95,1);const n=new o.Lq("arcRotateCamera",0,0,500,new c.Pq(0,0,0),t);n.minZ=1,n.maxZ=3e3,n.setPosition(new c.Pq(60,40,-50).scaleInPlace(10)),n.attachControl(void 0,!1),n.inertia=.8,n.speed=10;const h=new d.g("hemisphericLight",new c.Pq(0,1,0),t);h.intensity=.5,h.specular=new l.v9(0,0,0),h.groundColor=new l.v9(1,1,1);const w=new r.Z("directionalLight",new c.Pq(.5,-1,1),t);w.intensity=.5;w.shadowMaxZ=250,w.shadowMinZ=-250,w.autoCalcShadowZBounds=!1,w.autoUpdateExtends=!1,w.shadowOrthoScale=0,w.orthoTop=250,w.orthoBottom=-250,w.orthoLeft=-250,w.orthoRight=250;const P=new u.o(2048,w,!0);P.transparencyShadow=!0,P.usePercentageCloserFiltering=!0,P.forceBackFacesOnly=!1,P.bias=.004,P.filteringQuality=u.o.QUALITY_MEDIUM;const S=await(0,f.e)(new m.t,32),b=new g.h(S,{allowDynamicShadow:!0,preserveBackBuffer:!0});b.register(t),b.evaluationType=p.q.Buffered;const A=new c.uq;{const e=(0,a.x)("ground",{size:500},t);e.rotationQuaternion=c.PT.RotationAxis(new c.Pq(1,0,0),Math.PI/2),P.addShadowCaster(e),e.receiveShadows=!0;const i=new dt.Ty(b,new c.Pq(0,0,-1),0),n=new ct.t(S);n.shape=i,c.uq.FromQuaternionToRef(e.rotationQuaternion,A),n.setInitialTransform(A),n.motionType=1;const o=new ut.U(b,n);b.addRigidBodyToGlobal(o)}const G=512,R=(0,s.an)("box",{size:2},t);P.addShadowCaster(R),R.receiveShadows=!0;const W=new Float32Array(262144);R.thinInstanceSetBuffer("matrix",W,16,!1);const T=new dt.SA(b,new c.Pq(1,1,1)),L=[];for(let e=0;e<4;++e)for(let i=0;i<8;++i){const t=8*e+i,n=60*(i-4)+30,o=60*(e-2)+30,r=new st.x(S,G);for(let e=0;e<G;++e){r.setShape(e,T);const i=c.uq.TranslationToRef(n,1+2*e,o,A);r.setInitialTransform(e,i),r.setFriction(e,1),r.setLinearDamping(e,.3),r.setAngularDamping(e,.3)}const d=new lt.Y(b,r);b.addRigidBodyBundle(d,t);for(let e=0;e<G;e+=2){const i=[e,e+1],n=new B.vC(b,d,i,c.uq.Translation(0,-1.2,0),c.uq.Translation(0,1.2,0),!0);n.setLinearLowerLimit(new c.Pq(0,0,0)),n.setLinearUpperLimit(new c.Pq(0,0,0)),n.setAngularLowerLimit(new c.Pq(Math.PI/4,0,0)),n.setAngularUpperLimit(new c.Pq(0,0,0));for(let e=0;e<6;++e)n.enableSpring(e,!0),n.setStiffness(e,100),n.setDamping(e,1);b.addConstraint(n,t,!1)}L.push(d)}return b.onTickObservable.add((()=>{for(let e=0;e<L.length;++e)L[e].getTransformMatricesToArray(W,e*G*16);R.thinInstanceBufferUpdated("matrix")})),t}}}}]);